"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6373],{6373:(E,w,l)=>{l.r(w),l.d(w,{SigninPageModule:()=>F});var v=l(177),u=l(4341),r=l(4742),p=l(9228),f=l(467),b=l(4665);class g extends Error{}g.prototype.name="InvalidTokenError";var e=l(4438);function I(n,i){if(1&n){const s=e.RV6();e.j41(0,"ion-button",16),e.bIt("click",function(){e.eBV(s);const t=e.XpG();return e.Njj(t.togglePasswordVisibility())}),e.nrm(1,"ion-icon",17),e.k0s()}if(2&n){const s=e.XpG();e.R7$(),e.Y8G("name",s.showPassword?"eye-off-outline":"eye-outline")}}const j=[{path:"",component:(()=>{var n;class i{constructor(o,t,a){this.auth=o,this.toastController=t,this.router=a,this.showPassword=!1,this.toggleVisible=!1}ngOnInit(){console.log("Enter")}togglePasswordVisibility(){this.showPassword=!this.showPassword}onPasswordInput(o){const t=o.target.value;this.toggleVisible=t&&t.length>0}decodeToken(o){return(0,f.A)(function*(){try{return function y(n,i){if("string"!=typeof n)throw new g("Invalid token specified: must be a string");i||(i={});const s=!0===i.header?0:1,o=n.split(".")[s];if("string"!=typeof o)throw new g(`Invalid token specified: missing part #${s+1}`);let t;try{t=function P(n){let i=n.replace(/-/g,"+").replace(/_/g,"/");switch(i.length%4){case 0:break;case 2:i+="==";break;case 3:i+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function S(n){return decodeURIComponent(atob(n).replace(/(.)/g,(i,s)=>{let o=s.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}(i)}catch{return atob(i)}}(o)}catch(a){throw new g(`Invalid token specified: invalid base64 for part #${s+1} (${a.message})`)}try{return JSON.parse(t)}catch(a){throw new g(`Invalid token specified: invalid json for part #${s+1} (${a.message})`)}}(o)}catch(t){return console.error("Invalid token",t),null}})()}login(o){var t=this;return(0,f.A)(function*(){const{email:a,password:d}=o.value;if(!a||!d)return t.showToast("All fields are required","danger"),void console.error("Missing form values. All fields are required");try{const k=(yield(0,b.x9)(t.auth,a,d)).user,h=yield k.getIdToken();t.showToast("Signed in successfully","success"),console.log("User signed in successfully:",k),console.log("Token:",h),localStorage.setItem("token",h);const m=yield t.decodeToken(h);console.log("Decoded Token:",m),m&&(console.log("User Data:",JSON.stringify(m.email)),t.router.navigate("admin@admin.com"==m.email?["/home-admin"]:["/home/mv"]))}catch(c){throw t.showToast(c.message,"danger"),console.error("Error signing in:",c),c}})()}showToast(o,t){var a=this;return(0,f.A)(function*(){(yield a.toastController.create({message:o,duration:2e3,color:t,position:"top"})).present()})()}}return(n=i).\u0275fac=function(o){return new(o||n)(e.rXU(b.Nj),e.rXU(r.K_),e.rXU(p.Ix))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-signin"]],decls:37,vars:4,consts:[["form","ngForm"],[3,"translucent"],[1,"ion-text-center"],[1,"ion-padding",3,"fullscreen"],[3,"ngSubmit"],["size","12",1,"ion-text-center"],["src","https://img.freepik.com/vecteurs-libre/illustration-du-concept-connexion_114360-739.jpg","alt","Illustration"],["size","12"],["labelPlacement","floating","type","email","placeholder","email@example.com","ngModel","","name","email",1,"ion-text-center"],["slot","label"],["labelPlacement","floating","placeholder","password","ngModel","","name","password",1,"ion-text-center",3,"ionInput","type"],["fill","clear","slot","end",3,"click",4,"ngIf"],["size","12",1,"ion-text-center","ion-padding-vertical"],["expand","block","type","submit"],["routerLink","/signup",1,"ion-text-center"],["expand","block","fill","clear"],["fill","clear","slot","end",3,"click"],[3,"name"]],template:function(o,t){if(1&o){const a=e.RV6();e.j41(0,"ion-header",1)(1,"ion-toolbar")(2,"ion-title",2),e.EFF(3,"Signin"),e.k0s()()(),e.j41(4,"ion-content",3)(5,"form",4,0),e.bIt("ngSubmit",function(){e.eBV(a);const c=e.sdS(6);return e.Njj(t.login(c))}),e.j41(7,"ion-grid")(8,"ion-row")(9,"ion-col",5),e.nrm(10,"ion-img",6),e.j41(11,"ion-label")(12,"strong"),e.EFF(13,"Welcome Back"),e.k0s()()()(),e.j41(14,"ion-row")(15,"ion-col",7)(16,"ion-list")(17,"ion-item")(18,"ion-input",8)(19,"div",9),e.EFF(20,"Email"),e.k0s()()(),e.j41(21,"ion-item")(22,"ion-input",10),e.bIt("ionInput",function(c){return e.eBV(a),e.Njj(t.onPasswordInput(c))}),e.j41(23,"div",9),e.EFF(24,"Password"),e.k0s()(),e.DNE(25,I,2,1,"ion-button",11),e.k0s()()()(),e.j41(26,"ion-row")(27,"ion-col",12)(28,"ion-button",13),e.EFF(29,"Sign In"),e.k0s()()(),e.j41(30,"ion-row")(31,"ion-col",12)(32,"ion-label"),e.EFF(33,"Don't have an account ?"),e.k0s(),e.j41(34,"ion-router-link",14)(35,"ion-button",15),e.EFF(36,"Sign Up"),e.k0s()()()()()()()}2&o&&(e.Y8G("translucent",!0),e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(18),e.Y8G("type",t.showPassword?"text":"password"),e.R7$(3),e.Y8G("ngIf",t.toggleVisible))},dependencies:[v.bT,u.qT,u.BC,u.cb,u.vS,u.cV,r.Jm,r.hU,r.W9,r.lO,r.eU,r.iq,r.KW,r.$w,r.uz,r.he,r.nf,r.ln,r.BC,r.ai,r.Gw,r.N7,p.Wk]}),i})()}];let T=(()=>{var n;class i{}return(n=i).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[p.iI.forChild(j),p.iI]}),i})(),F=(()=>{var n;class i{}return(n=i).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[v.MD,u.YN,r.bv,T]}),i})()}}]);